

<link href="https://maxcdn.bootstrapcdn.com/font-awesome/4.3.0/css/font-awesome.min.css" rel="stylesheet">

<!--begin::Post-->
<!--post d-flex flex-column-fluid-->
<div  class=" postPos " id="kt_post" id="main-post" >
  <div class="container blog-page=" style="width:93rem;position:absolute;margin-left: 18%;height:auto">
    <div class="row">
        <div class="col-lg-12">
            <div class="main-box clearfix">
                
                <ng-template #noProject>
                    <img src="../../../../../assets/NoActiveSprint.png" style="margin-left: 26%;"/>
                    <h5 style="margin-left:35%">No Projects were found matching your search</h5>
                    <span style="margin-left:42%">
                        Be the first to 
                        <a class="table-link secondary" style="color:#0052CC"
                            (click)="onOpenModal(null, 'add')">
                                create a project
                        </a>
                    </span>
                </ng-template>
                <div class="table-responsive" *ngIf="projet.length != 0;else noProject">
                    <div class="btn-toolbar justify-content-between" role="toolbar" aria-label="Toolbar with button groups">
                        <div class="btn-group" role="group" aria-label="First group">

                            <div class="input-group">
                                <div class="form-outline">
                                <input [(ngModel)]="searchText" placeholder="Search project" autocomplete="on" name="search"
                                type="search" id="form1" class="form-control" style="width: 255px;height: 41px;"/>
                                </div>
                            </div>
                            <button type="button" class="btn btn-secondary" 
                                style="font-family: sans-serif;font-weight: bold;color:#F4F5F7;background-color:#253858;font-family: sans-serif;margin-left: 8px;border-radius: 5px;" 
                                (click)="onOpenModal(null, 'removeAll')">
                                Remove All
                            </button>
                            <div>
                                <a class="nav-link" href="http://example.com" id="dropdown01" data-toggle="dropdown" aria-haspopup="true" aria-expanded="false">
                                    <button type="button" class="btn btn-secondary dropdown-toggle" 
                                        style="background-color: #F5F6F8;color:#42526E; font-family: sans-serif;font-weight: bold;margin-left: 8px;">
                                            Export Project
                                    </button> 
                                </a>
                                <div class="dropdown-menu" aria-labelledby="dropdown01">
                                    <a class="dropdown-item" href="#">Print details</a>
                                    <a class="dropdown-item" href="#"></a>
                                    <a class="dropdown-item" (click)="excel()">Export XML</a>
                                    <a class="dropdown-item" href="#">Export Word</a>
                                    <a class="dropdown-item" (click)="pdf()">Export PDF</a>
                                </div>    
                            </div>
                            <div>
                            <a class="nav-link" href="http://example.com" id="dropdown01" data-toggle="dropdown" aria-haspopup="true" aria-expanded="false">
                                <button type="button" class="btn btn-secondary dropdown-toggle" 
                                    style="background-color: #F5F6F8;color:#42526E; font-family: sans-serif;font-weight: bold;margin-left: 8px;">
                                        Status
                                </button> 
                            </a>
                            <div class="dropdown-menu" aria-labelledby="dropdown01">
                                <a class="dropdown-item" href="#"><img src=""/> TODO</a>
                                <a class="dropdown-item" href="#">INPROGRESS</a>
                                <a class="dropdown-item" href="#">CODEREVIEW</a>
                                <a class="dropdown-item" href="#">DONE</a>
                            </div>
                        </div>
                        </div>
                        <div class="input-group">
                          <div class="input-group-prepend">
                            <a class="table-link secondary">
                                <button type="button" class="btn btn-primary" 
                                    style="background-color: #0052CC; font-family: sans-serif;font-weight: bold;" 
                                    (click)="onOpenModal(null, 'add')">
                                    Create
                                </button> 
                            </a>
                          </div>
                        </div>
                    </div><br>
                    <table class="table user-list" id="projects">
                        <thead>
                            <tr>
                                <th><span>Logo</span></th>
                                <th class="text-center"><span>Name </span></th>
                                <th class="text-center"><span>Description and Slogan </span></th>
                                <th><span>Price</span></th>
                                <th><span>Ratting</span></th>
                                <th><span>Methodology</span></th>
                                <th><span>First Date</span></th>
                                <th><span>Last Date</span></th>
                                <th>&nbsp;</th>
                            </tr>
                        </thead>
                        <tbody>
                            <tr *ngFor="let projet of projet | filter: searchText | paginate:{itemsPerPage: tableSize,
                                        currentPage: page,
                                        totalItems:count};let i = index" >
                                <td>
                                    <img src={{projet.logo}} alt="" width="40px"height="40px">
                                </td>
                                <td>
                                  <span class="user-subhead">{{projet.nomProjet}}</span><br>
                                </td>
                                <td  style="max-width: 28rem;">
                                    <span class="user-subhead">{{projet.slogan}}</span><br>
                                    <span class="textParag">{{projet.descriptionProjet}}</span>
                                </td>
                                <td>
                                    <span class="user-subhead">{{projet.prixProjet}}</span>
                                </td>
                                <td>
                                    <span class="user-subhead">{{projet.ratting}}</span>
                                </td>
                                <td>
                                    <span class="user-subhead">{{projet.methodologie}}</span>
                                </td>
                                <td>
                                    {{projet.dateDebutProjet}}
                                </td>
                                <td>
                                    {{projet.dateFinProjet}}
                                </td>
                                <td >
                                    <a class="nav-link " href="http://example.com" id="dropdown01" data-toggle="dropdown" aria-haspopup="true" aria-expanded="false">
                                        <span class="bi bi-three-dots"></span>
                                    </a>
                                    <div class="dropdown-menu" aria-labelledby="dropdown01">
                                        <a class="dropdown-item" (click)="onOpenModal(projet, 'edit')">Edit</a>
                                        <a class="dropdown-item" (click)="onOpenModal(projet, 'delete')">Delete Project</a>
                                    </div>
                                </td>
                            </tr>
                        </tbody>
                    </table>

                    <link rel="stylesheet" href="https://cdn.jsdelivr.net/npm/bootstrap@5.2.3/dist/css/bootstrap.min.css" integrity="sha384-rbsA2VBKQhggwzxH7pPCaAqO46MgnOM80zW1RWuH61DGLwZJEdK2Kadq2F9CUG65" crossorigin="anonymous">
                    <pagination-controls  
                         previousLabel="Prev"
                         nextLabel="Next"
                         (pageChange)="onTableDataChange($event)">
                    </pagination-controls>
                </div>
            </div>
        </div>
    </div>
  </div>
  <!--end::Container-->
</div>
<!--end::Post-->	

                <!-- Add Project Modal -->
                <div class="modal fade" id="addProjetModal" tabindex="-1" role="dialog" aria-labelledby="addEmployeeModalLabel" aria-hidden="true">
                    <div class="modal-dialog" role="document">
                    <div class="modal-content">
                        <div class="modal-header">
                            <h5 class="modal-title" id="addEmployeeModalLabel">Create Project</h5>
                            <button type="button" class="close" data-dismiss="modal" aria-label="Close">
                            </button>
                        </div>
                        <div class="modal-body">
                            <form #addForm="ngForm" (ngSubmit)="onAddProjet(addForm)">
                                <div class="form-group">
                                    <label for="nomProjet"><span style="color:#6B778C;font-family: Arial, Helvetica, sans-serif;">Project Name</span><span style="color:#DE350B">*</span></label>
                                    <input type="text" minlength="2" pattern="[a-zA-Z0-9 ]*" ngModel name="nomProjet" #nomProjet="ngModel" 
                                         [class]="addForm.valid?'form-control is-valid':'form-control'" id="nomProjet"  required>
                                    <div class="alert alert-danger" *ngIf="nomProjet.invalid && nomProjet.touched">Project name is required</div>
                                    <div class="alert alert-danger" *ngIf="nomProjet.errors?.['minlength'] && !nomProjet.untouched">Min length is two</div>
                                    <div class="alert alert-danger" *ngIf="nomProjet.errors?.['pattern'] && !nomProjet.untouched">Project name should be contains letters</div> 
                                </div>
                                <div class="form-group">
                                    <label for="descriptionProjet"><span style="color:#6B778C">Description</span><span style="color:#DE350B">*</span></label>
                                    <input type="text" minlength="3" ngModel name="descriptionProjet" #descriptionProjet="ngModel" 
                                        [class]="addForm.valid?'form-control is-valid':'form-control'"  id="descriptionProjet"  required>
                                    <div class="alert alert-danger" *ngIf="descriptionProjet.invalid && descriptionProjet.touched">Description is required</div>
                                    <div class="alert alert-danger" *ngIf="descriptionProjet.errors?.['minlength'] && !descriptionProjet.untouched">Min length is three</div>
                                </div>
                                <div class="form-group">
                                  <label for="prixProjet"><span style="color:#6B778C">Price</span><span style="color:#DE350B">*</span></label>
                                  <input type="text" pattern="[0-9]*" ngModel name="prixProjet" #prixProjet="ngModel" 
                                      [class]="addForm.valid?'form-control is-valid':'form-control'"  id="prixProjet"  required>
                                  <div class="alert alert-danger" *ngIf="prixProjet.invalid && prixProjet.touched">Price is required</div>
                                  <div class="alert alert-danger" *ngIf="prixProjet.errors?.['pattern'] && !prixProjet.untouched">Price should be a numbers</div>
                                </div> 
                                <div class="form-group">
                                  <label for="dateDebutProjet"><span style="color:#6B778C">Start Date of project</span></label>
                                  <input type="date" ngModel name="dateDebutProjet" #dateDebutProjet="ngModel" 
                                      [class]="addForm.valid?'form-control is-valid':'form-control'"  id="dateDebutProjet" >
                                </div>
                                <div class="form-group">
                                  <label for="dateFinProjet"><span style="color:#6B778C">Finished Date of project</span></label>
                                  <input type="date" ngModel name="dateFinProjet" #dateFinProjet="ngModel" 
                                      [class]="addForm.valid?'form-control is-valid':'form-control'"  id="dateFinProjet" >
                                </div>
                                <div class="form-group">
                                  <label for="logo"><span style="color:#6B778C">Logo</span><span style="color:#DE350B">*</span></label>
                                  <input type="text" ngModel name="logo" #logo="ngModel" required
                                      [class]="addForm.valid?'form-control is-valid':'form-control'" id="logo" >
                                </div>

                                <div class="form-group">
                                  <label for="slogan"><span style="color:#6B778C;font-family: Arial, Helvetica, sans-serif;">Slogan</span><span style="color:#DE350B">*</span></label>
                                  <input type="text" minlength="2" pattern="[a-zA-Z0-9 ]*" ngModel name="slogan" #slogan="ngModel" 
                                       [class]="addForm.valid?'form-control is-valid':'form-control'" id="slogan"  required>
                                  <div class="alert alert-danger" *ngIf="slogan.invalid && slogan.touched">Slogan is required</div>
                                  <div class="alert alert-danger" *ngIf="slogan.errors?.['minlength'] && !slogan.untouched">Min length is two</div>
                                  <div class="alert alert-danger" *ngIf="slogan.errors?.['pattern'] && !slogan.untouched">Slogan must be contains letters</div> 
                                </div>
                                <div class="form-group">
                                    <label for="methodologie"><span style="color:#6B778C">Methodology</span><span style="color:#DE350B">*</span></label><br>
                                    <select 
                                        [class]="addForm.valid?'form-control is-valid':'form-control'" 
                                        required ngModel name="methodologie" #methodologie="ngModel">  
                                            <option class="dropdown-item" value="Agile/Scrum">Agile/Scrum</option> 
                                            <option class="dropdown-item" value="Theoretical research">Theoretical research</option>
                                            <option class="dropdown-item" value="Applied research">Applied research</option>
                                            <option class="dropdown-item" value="Exploratory research">Exploratory research</option>
                                    </select>
                                </div>
                                
                                <div class="form-group">
                                    <label for="ratting"><span style="color:#6B778C">Ratting</span><span style="color:#DE350B">*</span></label><br>
                                    <select 
                                        [class]="addForm.valid?'form-control is-valid':'form-control'" 
                                        required ngModel name="ratting" #ratting="ngModel">  
                                            <option class="dropdown-item" value="1">1</option> 
                                            <option class="dropdown-item" value="2">2</option>
                                            <option class="dropdown-item" value="3">3</option>
                                            <option class="dropdown-item" value="4">4</option>
                                    </select>
                                </div>
                                <div class="modal-footer">
                                    <button type="button" id="add-projet-form" 
                                        class="btn btn-outline-secondary" data-dismiss="modal">
                                        Cancel
                                    </button>
                                    <button [disabled]="addForm.invalid" type="submit" 
                                        class="btn btn-primary" 
                                        style="background-color: #0052CC;">
                                        Create
                                    </button>
                                </div>
                            </form>
                        </div>
                    </div>
                    </div>
                </div>

                <!-- Edit Modal -->
                <div class="modal fade" id="editProjetModal" tabindex="-1" role="dialog" aria-labelledby="employeeEditModalLabel" aria-hidden="true">
                    <div class="modal-dialog" role="document">
                    <div class="modal-content">
                        <div class="modal-header">
                            <h5 class="modal-title" id="updateEmployeeModalLabel">Update {{editProjet?.nomProjet}}</h5>
                            <button type="button" class="close" data-dismiss="modal" aria-label="Close">
                            </button>
                        </div>
                        <div class="modal-body">
                            <form #editForm="ngForm">
                                <div class="form-group">
                                    <label for="nomProjet"><span style="color:#6B778C;font-family: Arial, Helvetica, sans-serif;">Projet name</span><span style="color:#DE350B">*</span></label>
                                    <input required type="text" minlength="2" pattern="[a-zA-Z0-9 ]*"  name="nomProjet" ngModel="{{editProjet?.nomProjet}}"  #nomProjet="ngModel"  [class]="editForm.valid?'form-control is-valid':'form-control'"  id="key" >
                                    <div class="alert alert-danger" *ngIf="nomProjet.invalid && nomProjet.touched">Projet name is required</div>
                                    <div class="alert alert-danger" *ngIf="nomProjet.errors?.['minlength'] && !nomProjet.untouched">Min length is two</div>
                                    <div class="alert alert-danger" *ngIf="nomProjet.errors?.['pattern'] && !nomProjet.untouched">Projet name should be contains letters</div> 
                                </div>
                                <input type="hidden" name="idProjet" ngModel="{{editProjet?.idProjet}}"  #idProjet="ngModel" class="form-control" id="idProjet" >
                                <div class="form-group">
                                <label for="descriptionProjet">Description </label>
                                <input type="text" required name="descriptionProjet" ngModel="{{editProjet?.descriptionProjet}}"  #summary="ngModel"  [class]="editForm.valid?'form-control is-valid':'form-control'"  id="descriptionProjet" >
                                </div>
                                <div class="form-group">
                                  <label for="prixProjet"><span style="color:#6B778C">Price</span><span style="color:#DE350B">*</span></label>
                                  <input type="text" pattern="[0-9]*" ngModel="{{editProjet?.prixProjet}}" name="prixProjet" #prixProjet="ngModel" 
                                      [class]="editForm.valid?'form-control is-valid':'form-control'"  id="prixProjet"  required>
                                  <div class="alert alert-danger" *ngIf="prixProjet.invalid && prixProjet.touched">Price is required</div>
                                  <div class="alert alert-danger" *ngIf="prixProjet.errors?.['pattern'] && !prixProjet.untouched">Price should be a numbers</div>
                                </div> 
                                <div class="form-group">
                                  <label for="dateDebutProjet"><span style="color:#6B778C">Start Date of project</span></label>
                                  <input type="date" ngModel="{{editProjet?.dateDebutProjet}}" name="dateDebutProjet" #dateDebutProjet="ngModel" 
                                      [class]="editForm.valid?'form-control is-valid':'form-control'"  id="dateDebutProjet" >
                                </div>
                                <div class="form-group">
                                  <label for="dateFinProjet"><span style="color:#6B778C">Finished Date of project</span></label>
                                  <input type="date" ngModel="{{editProjet?.dateFinProjet}}" name="dateFinProjet" #dateFinProjet="ngModel" 
                                      [class]="editForm.valid?'form-control is-valid':'form-control'"  id="dateFinProjet" >
                                </div>
                                <div class="form-group">
                                  <label for="logo"><span style="color:#6B778C">Logo</span><span style="color:#DE350B">*</span></label>
                                  <input type="text" ngModel="{{editProjet?.logo}}" name="logo" #logo="ngModel" required
                                      [class]="editForm.valid?'form-control is-valid':'form-control'"  id="logo" >
                                </div>
                                <div class="form-group">
                                  <label for="slogan"><span style="color:#6B778C;font-family: Arial, Helvetica, sans-serif;">Slogan</span><span style="color:#DE350B">*</span></label>
                                  <input type="text" minlength="2" pattern="[a-zA-Z0-9 ]*" ngModel="{{editProjet?.slogan}}" name="slogan" #slogan="ngModel" 
                                       [class]="editForm.valid?'form-control is-valid':'form-control'" id="slogan"  required>
                                  <div class="alert alert-danger" *ngIf="slogan.invalid && slogan.touched">Slogan is required</div>
                                  <div class="alert alert-danger" *ngIf="slogan.errors?.['minlength'] && !slogan.untouched">Min length is two</div>
                                  <div class="alert alert-danger" *ngIf="slogan.errors?.['pattern'] && !slogan.untouched">Slogan must be contains letters</div> 
                                </div>
                                <div class="form-group">
                                    <label for="methodologie"><span style="color:#6B778C">Methodology</span><span style="color:#DE350B">*</span></label><br>
                                    <select 
                                        [class]="editForm.valid?'form-control is-valid':'form-control'" 
                                        required ngModel="{{editProjet?.methodologie}}" name="methodologie" #methodologie="ngModel">  
                                            <option class="dropdown-item" value="Agile/Scrum">Agile/Scrum</option> 
                                            <option class="dropdown-item" value="Theoretical research">Theoretical research</option>
                                            <option class="dropdown-item" value="Applied research">Applied research</option>
                                            <option class="dropdown-item" value="Exploratory research">Exploratory research</option>
                                    </select>
                                </div>
                                <div class="form-group">
                                    <label for="ratting"><span style="color:#6B778C">Ratting</span><span style="color:#DE350B">*</span></label><br>
                                    <select 
                                        [class]="editForm.valid?'form-control is-valid':'form-control'" 
                                        required ngModel="{{editProjet?.ratting}}" name="ratting" #ratting="ngModel">  
                                            <option class="dropdown-item" value="1">1</option> 
                                            <option class="dropdown-item" value="2">2</option>
                                            <option class="dropdown-item" value="3">3</option>
                                            <option class="dropdown-item" value="4">4</option>
                                    </select>
                                </div>                     
                                <div class="modal-footer">
                                <button type="button" id="" data-dismiss="modal" class="btn btn-secondary">Cancel</button>
                                <button (click)="onUpdateProjet(editForm)" data-dismiss="modal"
                                    [disabled]="editForm.invalid" type="submit" 
                                    class="btn btn-primary" 
                                    style="background-color: #0052CC;">
                                        Save changes</button>
                                </div>
                            </form>
                        </div>
                    </div>
                    </div>
                </div>
                <!--End Edit Modal-->

                
                <!-- Delete Modal -->
                <div class="modal fade" id="deleteProjetModal" tabindex="-1" role="dialog" aria-labelledby="deleteModelLabel" aria-hidden="true">
                    <div class="modal-dialog" role="document">
                    <div class="modal-content">
                        <div class="modal-header">
                            <h5 class="modal-title" id="deleteModelLabel">Delete {{deleteProjet?.nomProjet}}?</h5>
                            <button type="button" class="close" data-dismiss="modal" aria-label="Close">
                            </button>
                        </div>
                        <div class="modal-body">
                            <h6 style="font-family: sans-serif;font-weight: bold;">You're about to permanently delete this project and all of its data.</h6>
                            <h6>If you're not sure, you can resolve or close this project instead.</h6>
                            <div class="modal-footer">
                                <button type="button" class="btn btn-outline-secondary" data-dismiss="modal">Cancel</button>
                                <button (click)="onRemoveProjet(deleteProjet?.idProjet)" style="background-color: #DE350B;font-family: sans-serif;font-weight: bold;" 
                                class="btn btn-danger" data-dismiss="modal">
                                    Delete
                            </button>
                            </div>
                        </div>
                    </div>
                    </div>
                </div>
                
                <!--End Delete Model-->

                   <!-- All Delete Modal -->
                   <div class="modal fade" id="deleteAllProjetModal" tabindex="-1" role="dialog" aria-labelledby="deleteAllModelLabel" aria-hidden="true">
                    <div class="modal-dialog" role="document">
                    <div class="modal-content">
                        <div class="modal-header">
                            <h5 class="modal-title" id="deleteAllModelLabel">Delete All Projects</h5>
                            <button type="button" class="close" data-dismiss="modal" aria-label="Close">
                            </button>
                        </div>
                        <div class="modal-body">
                            <h6 style="font-family: sans-serif;font-weight: bold;">You're about to permanently delete all of these projects and all of their data.</h6>
                            <h6>If you're not sure, you can resolve or close this project instead.</h6>
                            <div class="modal-footer">
                                <button type="button" class="btn btn-outline-secondary" data-dismiss="modal">Cancel</button>
                                <button (click)="removeAllProjet()" style="background-color: #DE350B;font-family: sans-serif;font-weight: bold;" 
                                class="btn btn-danger" data-dismiss="modal">
                                    Delete
                            </button>
                            </div>
                        </div>
                    </div>
                    </div>
                </div>
                
                <!--End All Delete Model-->