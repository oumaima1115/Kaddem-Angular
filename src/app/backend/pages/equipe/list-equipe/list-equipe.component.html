
<link href="https://maxcdn.bootstrapcdn.com/font-awesome/4.3.0/css/font-awesome.min.css" rel="stylesheet">

<!--begin::Post-->
<!--post d-flex flex-column-fluid-->
<div  class=" postPos " id="kt_post" id="main-post" >
  <div class="container blog-page=" style="width:93rem;position:absolute;margin-left: 18%;height:auto">
    <div class="row">
        <div class="col-lg-12">
            <div class="main-box clearfix">
                
                <ng-template #noEquipe>
                    <img src="../../../../../assets/NoActiveSprint.png" style="margin-left: 26%;"/>
                    <h5 style="margin-left:35%">No Teams were found matching your search</h5>
                    <span style="margin-left:42%">
                        Be the first to 
                        <a class="table-link secondary" style="color:#0052CC"
                            (click)="onOpenModal(null, 'add')">
                                create new Team
                        </a>
                    </span>
                </ng-template>
                <div class="table-responsive" *ngIf="equipe.length != 0;else noEquipe">
                    <div class="btn-toolbar justify-content-between" role="toolbar" aria-label="Toolbar with button groups">
                        <div class="btn-group" role="group" aria-label="First group">

                            <div class="input-group">
                                <div class="form-outline">
                                <input [(ngModel)]="searchText" placeholder="Search Team" autocomplete="on" name="search"
                                type="search" id="form1" class="form-control" style="width: 255px;height: 41px;"/>
                                </div>
                            </div>
                            <button type="button" class="btn btn-secondary" 
                                style="font-family: sans-serif;font-weight: bold;color:#F4F5F7;background-color:#253858;font-family: sans-serif;margin-left: 8px;border-radius: 5px;" 
                                (click)="onOpenModal(null, 'removeAll')">
                                Remove All
                            </button>
                            <div>
                                <a class="nav-link" href="http://example.com" id="dropdown01" data-toggle="dropdown" aria-haspopup="true" aria-expanded="false">
                                    <button type="button" class="btn btn-secondary dropdown-toggle" 
                                        style="background-color: #F5F6F8;color:#42526E; font-family: sans-serif;font-weight: bold;margin-left: 8px;">
                                            Export Team
                                    </button> 
                                </a>
                                <div class="dropdown-menu" aria-labelledby="dropdown01">
                                    <a class="dropdown-item" href="#">Print details</a>
                                    <a class="dropdown-item" href="#"></a>
                                    <a class="dropdown-item" href="#">Export XML</a>
                                    <a class="dropdown-item" href="#">Export RSS</a>
                                    <a class="dropdown-item" href="#">Export RSS (with comments)</a>
                                    <a class="dropdown-item" href="#">Export Word</a>
                                    <a class="dropdown-item" href="#">Export HTML report (all fields)</a>
                                    <a class="dropdown-item" href="#">Export Excel CSV (all fields)</a>
                                </div>    
                            </div>
                            <div>
                            <a class="nav-link" href="http://example.com" id="dropdown01" data-toggle="dropdown" aria-haspopup="true" aria-expanded="false">
                                <button type="button" class="btn btn-secondary dropdown-toggle" 
                                    style="background-color: #F5F6F8;color:#42526E; font-family: sans-serif;font-weight: bold;margin-left: 8px;">
                                        Level
                                </button> 
                            </a>
                            <div class="dropdown-menu" aria-labelledby="dropdown01">
                                <a class="dropdown-item" href="#"><img src=""/> JUNIOR</a>
                                <a class="dropdown-item" href="#">SENIOR</a>
                                <a class="dropdown-item" href="#">EXPERT</a>
                            </div>
                        </div>
                        </div>
                        <div class="input-group">
                          <div class="input-group-prepend">
                            <a class="table-link secondary">
                                <button type="button" class="btn btn-primary" 
                                    style="background-color: #0052CC; font-family: sans-serif;font-weight: bold;" 
                                    (click)="onOpenModal(null, 'add')">
                                    Create
                                </button> 
                            </a>
                          </div>
                        </div>
                    </div><br>
                    <table class="table user-list" id="teams">
                        <thead>
                            <tr>
                                <th><span>Team Logo</span></th>
                                <th><span>Name </span></th>
                                <th><span>Participant</span></th>
                                <th><span>Level</span></th>
                                <th><span>Status</span></th>
                                <th><span>Ratting</span></th>
                                <th>&nbsp;</th>


                            </tr>
                        </thead>
                        <tbody>
                            <tr *ngFor="let equipe of equipe | filter: searchText | paginate:{itemsPerPage: tableSize,
                                        currentPage: page,
                                        totalItems:count};let i = index" >
                                <td>
                                    <img src={{equipe.logo}} alt="" width="40px"height="40px">
                                </td>
                                <td>
                                  <span class="user-subhead">{{equipe.nomEquipe}}</span><br>
                                </td>
                                <td style="max-width: 28rem;">
                                    <span class="textParag">{{equipe.nbrParticipant}}/{{equipe.nbrMax}}</span>
                                </td>
                                <td>
                                    <span class="user-subhead">{{equipe.niveau}}</span>
                                </td>
                                <td>
                                  <span *ngIf="equipe.nbrParticipant < equipe.nbrMax">Disponible</span>
                                  <span *ngIf="equipe.nbrParticipant == equipe.nbrMax">Full</span>
                                </td>
                                <td>
                                    <span class="user-subhead">
                                      {{equipe.ratting}}
                                      <i class="fa fa-star" aria-hidden="true"></i>
                                      <i class="fa fa-star" aria-hidden="true"></i>
                                      <i class="fa fa-star-half-o" aria-hidden="true"></i>
                                    </span>
                                </td>
                                <td >
                                    <a class="nav-link " href="http://example.com" id="dropdown01" data-toggle="dropdown" aria-haspopup="true" aria-expanded="false">
                                        <span class="bi bi-three-dots"></span>
                                    </a>
                                    <div class="dropdown-menu" aria-labelledby="dropdown01">
                                        <a class="dropdown-item" (click)="onOpenModal(equipe, 'edit')">Edit</a>
                                        <a class="dropdown-item" (click)="onOpenModal(equipe, 'delete')">Delete Team</a>
                                    </div>
                                </td>
                            </tr>
                        </tbody>
                    </table>

                    <link rel="stylesheet" href="https://cdn.jsdelivr.net/npm/bootstrap@5.2.3/dist/css/bootstrap.min.css" integrity="sha384-rbsA2VBKQhggwzxH7pPCaAqO46MgnOM80zW1RWuH61DGLwZJEdK2Kadq2F9CUG65" crossorigin="anonymous">
                    <pagination-controls  
                         previousLabel="Prev"
                         nextLabel="Next"
                         (pageChange)="onTableDataChange($event)">
                    </pagination-controls>
                </div>
            </div>
        </div>
    </div>
  </div>
  <!--end::Container-->
</div>
<!--end::Post-->	

                <!-- Add Team Modal -->
                <div class="modal fade" id="addEquipeModal" tabindex="-1" role="dialog" aria-labelledby="addEmployeeModalLabel" aria-hidden="true">
                    <div class="modal-dialog" role="document">
                    <div class="modal-content">
                        <div class="modal-header">
                            <h5 class="modal-title" id="addEmployeeModalLabel">Create Team</h5>
                            <button type="button" class="close" data-dismiss="modal" aria-label="Close">
                            </button>
                        </div>
                        <div class="modal-body">
                            <form #addForm="ngForm" (ngSubmit)="onAddEquipe(addForm)">
                                <div class="form-group">
                                    <label for="nomEquipe"><span style="color:#6B778C;font-family: Arial, Helvetica, sans-serif;">Team Name</span><span style="color:#DE350B">*</span></label>
                                    <input type="text" minlength="2" pattern="[a-zA-Z0-9 ]*" ngModel name="nomEquipe" #nomEquipe="ngModel" 
                                         [class]="addForm.valid?'form-control is-valid':'form-control'" id="nomEquipe"  required>
                                    <div class="alert alert-danger" *ngIf="nomEquipe.invalid && nomEquipe.touched">Team name is required</div>
                                    <div class="alert alert-danger" *ngIf="nomEquipe.errors?.['minlength'] && !nomEquipe.untouched">Min length is two</div>
                                    <div class="alert alert-danger" *ngIf="nomEquipe.errors?.['pattern'] && !nomEquipe.untouched">Team name should be contains letters</div> 
                                </div>
                                
                                <div class="form-group">
                                  <label for="niveau"><span style="color:#6B778C">Level</span><span style="color:#DE350B">*</span></label><br>
                                  <select 
                                      [class]="addForm.valid?'form-control is-valid':'form-control'" 
                                      required ngModel name="niveau" #niveau="ngModel">  
                                          <option class="dropdown-item" value="JUNIOR">JUNIOR</option> 
                                          <option class="dropdown-item" value="SENIOR">SENIOR</option>
                                          <option class="dropdown-item" value="EXPERT">EXPERT</option>
                                  </select>
                              </div>
                              
                              <div class="form-group">
                                <label for="logo"><span style="color:#6B778C">Logo</span><span style="color:#DE350B">*</span></label>
                                <input type="text" required ngModel name="logo" #logo="ngModel"
                                    [class]="addForm.valid?'form-control is-valid':'form-control'" id="logo" >
                              </div>

                                <div class="form-group">
                                  <label for="nbrMax"><span style="color:#6B778C">Max Number of participant </span><span style="color:#DE350B">*</span></label>
                                  <input type="number" pattern="[0-9]*" ngModel name="nbrMax" #nbrMax="ngModel" 
                                      [class]="addForm.valid?'form-control is-valid':'form-control'"  id="nbrMax"  required>
                                  <div class="alert alert-danger" *ngIf="nbrMax.invalid && nbrMax.touched">Max Number of participant is required</div>
                                  <div class="alert alert-danger" *ngIf="nbrMax.errors?.['pattern'] && !nbrMax.untouched">Max Number of participant should be a numbers</div>
                                </div> 
                                
                                <div class="form-group">
                                  <label for="nbrParticipant"><span style="color:#6B778C">Current Number of participant </span><span style="color:#DE350B">*</span></label>
                                  <input type="number" pattern="[0-9]*" ngModel name="nbrParticipant" #nbrParticipant="ngModel" 
                                      [class]="addForm.valid?'form-control is-valid':'form-control'"  id="nbrParticipant"  required>
                                  <div class="alert alert-danger" *ngIf="nbrParticipant.invalid && nbrParticipant.touched">Number of participant is required</div>
                                  <div class="alert alert-danger" *ngIf="nbrParticipant.errors?.['pattern'] && !nbrParticipant.untouched">Number of participant should be a numbers</div>
                                </div> 

                                <div class="form-group">
                                  <label for="ratting"><span style="color:#6B778C">Ratting</span><span style="color:#DE350B">*</span></label><br>
                                  <select 
                                      [class]="addForm.valid?'form-control is-valid':'form-control'" 
                                      required ngModel name="ratting" #ratting="ngModel">  
                                          <option class="dropdown-item" value="1">1</option> 
                                          <option class="dropdown-item" value="2">2</option>
                                          <option class="dropdown-item" value="3">3</option>
                                          <option class="dropdown-item" value="4">4</option>
                                  </select>
                              </div>
                                
                                <div class="modal-footer">
                                    <button type="button" id="add-equipe-form" 
                                        class="btn btn-outline-secondary" data-dismiss="modal">
                                        Cancel
                                    </button>
                                    <button [disabled]="addForm.invalid" type="submit" 
                                        class="btn btn-primary" 
                                        style="background-color: #0052CC;">
                                        Create
                                    </button>
                                </div>
                            </form>
                        </div>
                    </div>
                    </div>
                </div>

                <!-- Edit Modal -->
                <div class="modal fade" id="editEquipeModal" tabindex="-1" role="dialog" aria-labelledby="employeeEditModalLabel" aria-hidden="true">
                    <div class="modal-dialog" role="document">
                    <div class="modal-content">
                        <div class="modal-header">
                            <h5 class="modal-title" id="updateEmployeeModalLabel">Update {{editEquipe?.nomEquipe}}</h5>
                            <button type="button" class="close" data-dismiss="modal" aria-label="Close">
                            </button>
                        </div>
                        <div class="modal-body">
                            <form #editForm="ngForm">
                              <div class="form-group">
                                  <label for="nomEquipe"><span style="color:#6B778C;font-family: Arial, Helvetica, sans-serif;">Team Name</span><span style="color:#DE350B">*</span></label>
                                  <input type="text" minlength="2" pattern="[a-zA-Z0-9 ]*" ngModel="{{editEquipe?.nomEquipe}}" name="nomEquipe" #nomEquipe="ngModel" 
                                       [class]="editForm.valid?'form-control is-valid':'form-control'" id="nomEquipe"  required>
                                  <div class="alert alert-danger" *ngIf="nomEquipe.invalid && nomEquipe.touched">Team name is required</div>
                                  <div class="alert alert-danger" *ngIf="nomEquipe.errors?.['minlength'] && nomEquipe.touched">Min length is two</div>
                                  <div class="alert alert-danger" *ngIf="nomEquipe.errors?.['pattern'] && nomEquipe.touched">Team name should be contains letters</div> 
                              </div>
                              <input type="hidden" name="idEquipe" ngModel="{{editEquipe?.idEquipe}}"  #idEquipe="ngModel" class="form-control" id="idEquipe" >
                              <div class="form-group">
                                <label for="niveau"><span style="color:#6B778C">Level</span><span style="color:#DE350B">*</span></label><br>
                                <select 
                                    [class]="editForm.valid?'form-control is-valid':'form-control'" 
                                    required ngModel="{{editEquipe?.niveau}}" name="niveau" #niveau="ngModel">  
                                        <option class="dropdown-item" value="JUNIOR">JUNIOR</option> 
                                        <option class="dropdown-item" value="SENIOR">SENIOR</option>
                                        <option class="dropdown-item" value="EXPERT">EXPERT</option>
                                </select>
                            </div>
                            <div class="form-group">
                                <label for="logo"><span style="color:#6B778C">Logo</span><span style="color:#DE350B">*</span></label>
                                <input type="text" ngModel="{{editEquipe?.logo}}" name="logo" #logo="ngModel" 
                                    [class]="editForm.valid?'form-control is-valid':'form-control'"  id="logo" >
                              </div>
                              <div class="form-group">
                                <label for="nbrMax"><span style="color:#6B778C">Max Number of participant </span><span style="color:#DE350B">*</span></label>
                                <input type="number" pattern="[0-9]*" ngModel="{{editEquipe?.nbrMax}}" name="nbrMax" #nbrMax="ngModel" 
                                    [class]="editForm.valid?'form-control is-valid':'form-control'"  id="nbrMax"  required>
                                <div class="alert alert-danger" *ngIf="nbrMax.invalid && nbrMax.touched">Max Number of participant is required</div>
                                <div class="alert alert-danger" *ngIf="nbrMax.errors?.['pattern'] && nbrMax.touched">Max Number of participant should be a numbers</div>
                              </div> 
                              
                              <div class="form-group">
                                <label for="nbrParticipant"><span style="color:#6B778C">Current Number of participant </span><span style="color:#DE350B">*</span></label>
                                <input type="number" pattern="[0-9]*" ngModel="{{editEquipe?.nbrParticipant}}" name="nbrParticipant" #nbrParticipant="ngModel" 
                                    [class]="editForm.valid?'form-control is-valid':'form-control'"  id="nbrParticipant"  required>
                                <div class="alert alert-danger" *ngIf="nbrParticipant.invalid && nbrParticipant.touched">Number of participant is required</div>
                                <div class="alert alert-danger" *ngIf="nbrParticipant.errors?.['pattern'] && nbrParticipant.touched">Number of participant should be a numbers</div>
                              </div> 

                              <div class="form-group">
                                <label for="ratting"><span style="color:#6B778C">Ratting</span><span style="color:#DE350B">*</span></label><br>
                                <select 
                                    [class]="editForm.valid?'form-control is-valid':'form-control'" 
                                    required ngModel="{{editEquipe?.ratting}}"  name="ratting" #ratting="ngModel">  
                                        <option class="dropdown-item" value="1">1</option> 
                                        <option class="dropdown-item" value="2">2</option>
                                        <option class="dropdown-item" value="3">3</option>
                                        <option class="dropdown-item" value="4">4</option>
                                </select>
                            </div>
                                <div class="modal-footer">
                                <button type="button" id="" data-dismiss="modal" class="btn btn-secondary">Cancel</button>
                                <button (click)="onUpdateEquipe(editForm)" data-dismiss="modal"
                                    [disabled]="editForm.invalid" type="submit" 
                                    class="btn btn-primary" 
                                    style="background-color: #0052CC;">
                                        Save changes</button>
                                </div>
                            </form>
                        </div>
                    </div>
                    </div>
                </div>
                <!--End Edit Modal-->

                
                <!-- Delete Modal -->
                <div class="modal fade" id="deleteEquipeModal" tabindex="-1" role="dialog" aria-labelledby="deleteModelLabel" aria-hidden="true">
                    <div class="modal-dialog" role="document">
                    <div class="modal-content">
                        <div class="modal-header">
                            <h5 class="modal-title" id="deleteModelLabel">Delete {{deleteEquipe?.nomEquipe}}?</h5>
                            <button type="button" class="close" data-dismiss="modal" aria-label="Close">
                            </button>
                        </div>
                        <div class="modal-body">
                            <h6 style="font-family: sans-serif;font-weight: bold;">You're about to permanently delete this team and all of its data.</h6>
                            <h6>If you're not sure, you can resolve or close this team instead.</h6>
                            <div class="modal-footer">
                                <button type="button" class="btn btn-outline-secondary" data-dismiss="modal">Cancel</button>
                                <button (click)="onRemoveEquipe(deleteEquipe?.idEquipe)" style="background-color: #DE350B;font-family: sans-serif;font-weight: bold;" 
                                class="btn btn-danger" data-dismiss="modal">
                                    Delete
                            </button>
                            </div>
                        </div>
                    </div>
                    </div>
                </div>
                
                <!--End Delete Model-->

                   <!-- All Delete Modal -->
                   <div class="modal fade" id="deleteAllEquipeModal" tabindex="-1" role="dialog" aria-labelledby="deleteAllModelLabel" aria-hidden="true">
                    <div class="modal-dialog" role="document">
                    <div class="modal-content">
                        <div class="modal-header">
                            <h5 class="modal-title" id="deleteAllModelLabel">Delete All Teams</h5>
                            <button type="button" class="close" data-dismiss="modal" aria-label="Close">
                            </button>
                        </div>
                        <div class="modal-body">
                            <h6 style="font-family: sans-serif;font-weight: bold;">You're about to permanently delete all of these teams and all of their data.</h6>
                            <h6>If you're not sure, you can resolve or close this team instead.</h6>
                            <div class="modal-footer">
                                <button type="button" class="btn btn-outline-secondary" data-dismiss="modal">Cancel</button>
                                <button (click)="removeAllEquipe()" style="background-color: #DE350B;font-family: sans-serif;font-weight: bold;" 
                                class="btn btn-danger" data-dismiss="modal">
                                    Delete
                            </button>
                            </div>
                        </div>
                    </div>
                    </div>
                </div>
                
                <!--End All Delete Model-->